webpackJsonp([8],{rpOp:function(e,t){e.exports='<div class="item" data-layer-stage="{stage}" data-layer="{id}">\r\n    <label class="{show} title">\r\n    <span>{name}</span>\r\n    <i><em></em></i>\r\n    </label>\r\n    <ul class="features_text">\r\n        {legendHtml}        \r\n    </ul>\r\n</div>'},znA6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var i=a("nyl5"),n=a("zOK4"),l=a("9y7l"),s=a("3dkN"),r=a("+lQI"),o=a("g8xX"),d=a("rpOp"),c=a.n(d),p=[{id:r.a.GoogleImage,name:"谷歌影像",src:n.a.getGoogleImage(null,!1)},{id:r.a.TDImage,name:"天地图影像",src:n.a.getTianImage(null,!1)},{id:r.a.TDVector,name:"天地图矢量",src:n.a.getTianVector(null,!1),topMost:!0}],g=i.a.inhertObject(l.default);g.injects={ol:void 0,mapContainer:void 0,controlBarContainer:void 0,controlBar:void 0,getMapHelper:void 0},g.options={target:"tocPanel.html",templates:{itemLegendTemplate:'<li data-value="{value}"><span style="background: {color}"></span>{name}</li>'},layers:["source"]},g.type=s.a.command,g.init=function(e,t){l.default.init.apply(this,arguments);var a=this.injects.getMapHelper(),i=t&&t.layers?t.layers:this.options.layers;this.options.layers=function e(t,a,i){i=i||[];for(let n=0;n<t.length;n++){const l=t[n];if("all"==l)e(p,a,i);else if("source"==l)e(a.layers.filter(e=>e.get("type")!=o.a.tmpMap).map(e=>({id:e.get("id"),name:e.get("title")})),a,i);else{if(i.filter(e=>e.id==l.id).length>0){console.warn(`toc说: id为 ${l.id} 的值重复了`);continue}i.push(l)}}return i}(i,a)},g.active=async function(){this.panel=await l.default.active.apply(this,arguments),this.options.isPanelFirstLoad&&(function(){var e=this.injects.getMapHelper(),t="";for(let s=0;s<this.options.layers.length;s++){const r=this.options.layers[s];if(i.a.isObj(r)||(r=p.filter(e=>e.id==r)[0]),!r)throw"layerDefine error";var a=e.getLayer(r.id);if(a||(a=e.addLayer(r.id,r.src)),r.topMost?a.setZIndex(20):r.index&&a.setZIndex(r.index),r.legend){var n="";for(let e=0;e<r.legend.length;e++){const t=r.legend[e];n+=this.options.templates.itemLegendTemplate.format(t)}}var l=c.a.format({id:r.id,name:r.name||a.get("title"),stage:a.getVisible()?1:0,show:a.getVisible()?"current":"",legendHtml:n||""});t+=l}this.panel.find(".features").empty().append(t)}.call(this),function(){var t=this.injects.getMapHelper();this.panel.delegate(".item","click",function(){var a=e(this),i=a.attr("data-layer-stage"),n=a.attr("data-layer");"1"==i?(a.attr("data-layer-stage","0"),a.find(".title").removeClass("current"),t.setVisible(t.getLayer(n),!1)):(a.attr("data-layer-stage","1"),a.find(".title").addClass("current"),t.setVisible(t.getLayer(n),!0))})}.call(this))},g.destroy=function(){},t.default=g}.call(t,a("7t+N"))}});
//# sourceMappingURL=8.d6de8fad1488edf5e525.js.map