webpackJsonp([6],{QWp6:function(t,i){t.exports='<div id=\'lengthLabel\' class="tooltip tooltip-measure" data-line="{lineId}" data-id="{id}"  data-count="{count}" >\r\n    <a class="ol-popup-closer hidden" href="javascript:void(0);"></a>\r\n    <div class="content"></div>\r\n</div>'},Swog:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){var o=e("nyl5"),n=e("9y7l"),s=e("3dkN"),a=e("+lQI"),r=e("F/ay"),l=e("QWp6"),c=e.n(l),p=e("zkbY"),d=(e.n(p),o.a.inhertObject(n.default));function h(i){0==this.count&&t(this.curTooltip.target).attr("data-count",this.count).find(".content").empty().append("<span>起点</span>"),this.curTooltip.lineId||(this.curTooltip.lineId=this.curLineId),this.curTooltip.className="tooltip tooltip-static",this.curTooltip.marker.setPosition(i),this.pinToolTips.push(this.curTooltip)}function u(t=0,i=0){var e=this.injects.mapContainer,n=this.injects.getMapHelper(),s=o.a.getRandom();e.append(c.a.format({count:this.count,id:s,lineId:this.curLineId}));var a=e.find(`${this.options.toolTipSelector}[data-id=${s}]`)[0];this.curTooltip=n.addOverlay([t,i],a,{offset:[0,-15],positioning:"bottom-center"},{canMutity:!0}),this.curTooltip.lineId=this.curLineId}d.injects={ol:void 0,mapContainer:void 0,controlBarContainer:void 0,controlBar:void 0,getMapHelper:void 0},d.options={toolTipSelector:"#lengthLabel",helpTipSelector:"#toolTipBtn",drawType:"LineString"},d.type=s.a.tool,d.init=function(i,e){this.injects=t.extend(!0,{},this.injects,i),this.options=t.extend(!0,{},this.options,e),this.lines=[],this.curLineId="",this.pinToolTips=[],this.curTooltip=void 0,this.sketch=void 0,this.count=0,this.source=void 0,u.call(this),function(){var i=this,e=i.injects.mapContainer,o=i.injects.getMapHelper();e.delegate(`${i.options.toolTipSelector} .ol-popup-closer`,"click",function(){var e=t(this).parent(".tooltip-measure:first"),n=e.attr("data-line");i.pinToolTips.filter(t=>t.lineId==n).map(t=>t.marker);o.clear(a.a.tmpDrawLayer),o.removeOverlay(!0)})}.call(this)},d.active=function(){var i=this.injects.getMapHelper();this.injects.ol;this.curTooltip||u.call(this),this.drawObj=i.draw({startDraw:function(i,e){var n=this,s=n.injects.ol,a=n.injects.getMapHelper();n.curLineId=o.a.getRandom(),n.lines.push(n.curLineId),n.source=e,n.sketch=i.feature,n.count=0;var l=i.coordinate;n.listener=n.sketch.getGeometry().on("change",function(i){var e,c=i.target;if(c instanceof s.geom.Polygon)e=o.a.formatArea(c.getArea()),l=c.getInteriorPoint().getCoordinates();else if(c instanceof s.geom.LineString){var p=a.transForm(c,a.spatialReference,"EPSG:4326");e=o.a.formatLength(r.a.getLength(p)),l=c.getLastCoordinate()}t(n.curTooltip.target).find(".content").empty().append(`<span>${e}</span>`),n.curTooltip.marker.setPosition(l)})}.bind(this),endDraw:function(){var i=this.injects.ol,e=this.injects.getMapHelper();i.Observable.unByKey(this.listener),this.sketch=null;var o=this.curTooltip.marker.getPosition();h.call(this,o);var n=new i.geom.Point(o);this.source.addFeature(new i.Feature(n)),t(this.curTooltip.target).find(".ol-popup-closer").removeClass("hidden"),this.curTooltip=null,this.count=0,e.setCurTool(void 0)}.bind(this),click:function(t){var i=this.injects.ol;h.call(this,t.coordinate);var e=new i.geom.Point(t.coordinate);this.source.addFeature(new i.Feature(e)),u.call(this,t.coordinate),this.count++}.bind(this)},this.options.drawType,void 0,{onceCall:!0})},d.destroy=function(){ol.Observable.unByKey(this.listener),this.sketch=null},i.default=d}.call(i,e("7t+N"))},zkbY:function(t,i){t.exports="<div id='toolTipBtn' class=\"tooltip tooltip-help hidden\">\r\n\r\n</div>"}});
//# sourceMappingURL=6.875779bf6e75aa2a99f9.js.map