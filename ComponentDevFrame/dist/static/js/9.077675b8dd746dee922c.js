webpackJsonp([9],{bVOR:function(e,t){e.exports='\r\n<div class="identifyPanel ctlPanel" panelID="{panelID}" style="display:none">\r\n    <div class="widget" style="min-width: 300px; border: 1px solid #646c75; border-radius: 2px;">\r\n        <div class="widget-header">\r\n            \x3c!-- <span class="widget-caption">功能面板</span> --\x3e\r\n            <div class="widget-buttons" style="padding:0 13px; z-index: 999999;">\r\n                <span class="widget_back btn" style="z-index:9999999999">\r\n                    <i class="fa fa-times"></i>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        \x3c!--Widget Header--\x3e\r\n        <div class="widget-body form-horizontal" style="max-height:500px;overflow-y:auto;padding:10px 15px;">\r\n            <div class="ol-tabs ol-tabs--top">\r\n                <div class="ol-tabs__header is-top">\r\n                    <div class="ol-tabs__nav-wrap is-top">\r\n                        <div class="ol-tabs__nav-scroll">\r\n                            <div class="tab-list ol-tabs__nav is-top" style="transform: translateX(0px);">\r\n                                <div class="tab-slider ol-tabs__active-bar is-top" style="width: 56px; transform: translateX(0px);"></div>\r\n                                <div data-panel=\'111\' class="tab ol-tabs__item is-top">用户管理</div>\r\n                                <div data-panel=\'112\' class="tab ol-tabs__item is-top">配置管理</div>\r\n                                <div data-panel=\'113\' class="tab ol-tabs__item is-top" selected="true">角色管理</div>\r\n                                <div data-panel=\'114\' class="tab ol-tabs__item is-top" >定时任务补偿</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="ol-tabs__content">\r\n                    <div panel-id="111" class="tab-panel ol-tab-pane" >用户管理</div>\r\n                    <div panel-id="112" class="tab-panel ol-tab-pane"  >配置管理</div>\r\n                    <div panel-id="113" class="tab-panel ol-tab-pane"  >角色管理</div>\r\n                    <div panel-id="114" class="tab-panel ol-tab-pane"  >定时任务补偿</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \x3c!--Widget Body--\x3e\r\n    </div>\r\n</div>\r\n\r\n\r\n'},pIGh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var i=a("nyl5"),s=a("9y7l"),n=a("3dkN"),r=(a("+lQI"),a("U+o6")),l=a("hhWL"),o=a("K/Ze"),p=a("Xicc"),d=a.n(p),c=a("bVOR"),v=a.n(c),u=i.a.inhertObject(s.default);function f(e){var t=this.injects.getMapHelper(),a=[],i=e||this.__params.selectFeatures;_.call(this,!0);for(let e=0;e<i.length;e++){const l=i[e];var s=t.getCenter(l.features),n=l.proj;if(s){var r=t.addPoint(this.options.pointLayerID,s,o.a.pointStyle.getSucc(),n);a.push(r)}else console.error(`no center point ${e}`)}if(this.__params.curFeature){s=t.getCenter(this.__params.curFeature.features),n=this.__params.curFeature.features.proj;if(s){r=t.addPoint(this.options.pointLayerID,s,o.a.pointStyle.getWarn(),n);a.push(r)}}this.__params.mapPoints=[].concat.apply([],a)}function _(e){this.injects.getMapHelper().clear(this.options.pointLayerID),e||(this.__params.mapPoints=[],this.__params.curFeature=null)}function b(t,a){var i=t.siblings(".tab.is-active");if(i!=t){i.removeClass("is-active"),t.addClass("is-active");var s=t.attr("data-panel"),n=t.parents(".ol-tabs:first").find(`.tab-panel[panel-id=${s}]:first`);n.show(),n.siblings(".tab-panel").hide(),function(t){var a=t.parents(".tab-list:first").find(".tab-slider"),i=t.innerWidth()+6,s=0;t.prevAll(".tab").each((t,a)=>{s+=3*t+e(a).innerWidth()}),a.css("width",`${i}px`),a.css("transform",`translateX(${s}px`)}(t),a&&a(s,t,n)}}u.injects={ol:void 0,mapContainer:void 0,controlBarContainer:void 0,controlBar:void 0,getMapHelper:void 0},u.options={cursor:"help",queryPanelSelector:".identifyPanel",layerTileField:"title",maxFeatureCount:3,templates:{tabSliderHtml:'<div class="tab-slider ol-tabs__active-bar is-top" style="width: 56px; transform: translateX(0px);"></div>',tabTemplate:"<div data-panel='{id}' class=\"tab ol-tabs__item is-top\" >{title}</div>",tabPanelTemplate:'<div panel-id="{id}" class="tab-panel ol-tab-pane" >{content}</div>',valueTemplate:'<div class="row"><label class="ol-form-item__label title" title="{name}">{name}:</label>\n                        <label class="ol-form-item__label content" title="{value}">{value}</label></div>'},skip:{matchWholeWord:!1,skipFields:["guid","shape","geom","geometry","polygon","id","objectid","geojson","wkt","gid"]},translate:{needTranslate:!0,translateUrl:null,translateFunc:void 0},pointLayerID:"identify",events:{selTabCallBack:function(e,t,a){var s=this.__params.selectFeatures.filter(t=>t.tabId==e)[0];if(!s)return;this.__params.curFeature=s,this.curPanel=a,f.call(this),async function(){if(!this.__params.curFeature)return console.warn("no curFeature"),void this.curPanel.empty().append("未查到有用的数据。");var e=this.options,t=this.__params.curFeature.features instanceof ol.Feature?this.__params.curFeature.features.getProperties():this.__params.curFeature.features;if(e.translate.needTranslate&&e.translate.translateUrl){var a;if(i.a.isFunc(e.translate.translateFunc))a=e.translate.translateFunc(t);else if(i.a.isString(e.translate.translateUrl)){var s={},n=this.options.skip.skipFields;for(const e in t)if(t.hasOwnProperty(e)){const a=t[e];n.findIndex(t=>t.toLowerCase()==e.toLowerCase())<0&&(s[e]=a)}var r=this.__params.curFeature.layer;if(r){var o={isTranslateFieldName:!0,tableName:r.get(l.a.translateTable)||r.get("id"),jObjects:[s]};a=await d.a.postRequest(e.translate.translateUrl,o)}}var p=i.a.isArray(a)?a[0]:a;t=p||t}var c="",v=e.skip.skipFields;for(const a in t){if(!t.hasOwnProperty(a)||v.filter(t=>e.skip.matchWholeWord?t==a:t.toLowerCase()==a.toLowerCase()).length>0)continue;const i=t[a];c+=e.templates.valueTemplate.format({name:a||"未命名字段",value:void 0==i||""==i?"(空)":i})}this.curPanel.empty().append(c)}.call(this)},exSearch:void 0,createPanelCallback:void 0}},u.__params={isCloseClick:!1,curFeature:void 0,selectFeatures:void 0,mapPoints:[],identifyListener:void 0,identifyPanel:null,identifyPanelOverLayObj:null},u.type=n.a.tool,u.init=function(t,a){this.injects=e.extend(!0,{},this.injects,t),this.options=e.extend(!0,{},this.options,a)},u.active=function(){this.injects.getMapHelper(),this.injects.ol;(function(){var e=this.injects.mapContainer;0==e.find(this.options.queryPanelSelector).length&&(e.append(v.a),this.__params.identifyPanel=e.find(this.options.queryPanelSelector))}).call(this),function(){var t=this,a=t.injects.mapContainer,s=t.injects.getMapHelper();a.delegate(`${t.options.queryPanelSelector} .tab`,"click",function(){b(e(this),t.options.events.selTabCallBack.bind(t))}),a.delegate(`${t.options.queryPanelSelector} .widget_back`,"click",function(e){t.__params.isCloseClick=!0,t.__params.identifyPanel.hide(),_.call(t)}),a.delegate(`${t.options.queryPanelSelector}`,"click",function(e){t.__params.isCloseClick=!0}),t.__params.identifyListener||(t.__params.identifyListener=s.addListener(r.a.click,async function(e){var t=this,a=t.injects.getMapHelper(),s=[];if("DIV"==e.b.b.path[0].tagName||t.__params.isCloseClick)return void(t.__params.isCloseClick=!1);if(i.a.isFunc(t.options.events.exSearch)){var n=a.isLatLon(e.coordinate)?e.coordinate:a.toLonLat(e.coordinate);s=await t.options.events.exSearch(n)}var r=1;if(a.map.forEachFeatureAtPixel(e.pixel,function(e,n){n.get("id")!=t.options.pointLayerID&&(r++>t.options.maxFeatureCount||s.push({tabId:i.a.getRandom(),features:e,layer:n,proj:n.getSource().getProjection()||n.get("proj")||a.spatialReference}))}),i.a.isArray(s,!0)){var l=s[0].features,o=s[0].proj;a.zoomToFeature(l,void 0,void 0,o)}if(s&&0==s.length)return;t.__params.selectFeatures=s,t.__params.identifyPanelOverLayObj=a.addOverlay(e.coordinate,t.__params.identifyPanelOverLayObj||t.__params.identifyPanel,{positioning:"bottom-center"}),t.__params.identifyPanel.show(),function(e,t,a){var s="",n="";for(let e=0;e<t.length;e++){const p=t[e];var r=p.title?p.title:p.layer.get(this.options.layerTileField)||`未命名图层${e}`;s+=this.options.templates.tabTemplate.format({id:p.tabId,title:r});var l=`<div panel-id="${p.tabId}" class="tab-panel ol-tab-pane" >{content}</div>`,o=i.a.isFunc(a)?a(p):`${p.tabId}`;n+=l.format({content:o})}e.find(".tab-list").empty().append(this.options.templates.tabSliderHtml).append(s),e.find(".ol-tabs__content").empty().append(n),b(e.find(".tab:first"),this.options.events.selTabCallBack.bind(this))}.call(t,t.__params.identifyPanel,t.__params.selectFeatures,t.options.events.createPanelCallback),f.call(t)}.bind(t)))}.call(this)},u.destroy=function(){var e=this.injects.getMapHelper();e.removeListener(this.__params.identifyListener),e.removeOverlay(!0),_.call(this)},t.default=u}.call(t,a("7t+N"))}});
//# sourceMappingURL=9.077675b8dd746dee922c.js.map