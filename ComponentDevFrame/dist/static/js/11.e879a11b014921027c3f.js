webpackJsonp([11],{"85Fh":function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(t){var i=n("nyl5"),e=n("9y7l"),o=n("3dkN"),l=i.a.inhertObject(e.default);function s(t){var a=t||this.options.mainType;this.curType=a,this.panel.find(`[data-location-type=${a}]`).removeClass("hidden").siblings(".panel").addClass("hidden"),this.panel.find(`.changeTypeBtns [data-target=${a}]`).removeClass("is-plain").siblings("button").addClass("is-plain"),"DMDZ"==t&&p.call(this)}function p(){var a=this,n=this.injects.getMapHelper().map,i=n.getView().calculateExtent(n.getSize()),e=ol.extent.getCenter(i);if(e==a.options.point)t("#location_dizhi").val(a.options.address);else{a.options.point=e;var o="http://api.tianditu.gov.cn/geocoder?postStr={'lon':"+e[0]+",'lat':"+e[1]+",'ver':1}&type=geocode&tk=55f7e166eaeed33da38b5acf129350bb";t.get(o,function(n){var i=JSON.parse(n).result.formatted_address;a.options.address=i,t("#location_dizhi").val(i)})}}l.injects={ol:void 0,mapContainer:void 0,controlBarContainer:void 0,controlBar:void 0,getMapHelper:void 0},l.options={target:"locationPanel.html",mainType:"XY",pointLayerID:"locationPointLayer",point:[],address:""},l.type=o.a.command,l.init=function(t,a){e.default.init.apply(this,arguments)},l.active=async function(){this.panel=await e.default.active.apply(this,arguments);this.injects.getMapHelper(),this.injects.ol;s.call(this),this.options.isPanelFirstLoad&&function(){var a=this,n=this.injects.getMapHelper();a.panel.on("click",".changeTypeBtns button",function(){var n=t(this).attr("data-target");s.call(a,n)}),n.map.on("moveend",function(t){p.call(a)}),a.panel.on("click","[data-action]",function(){var i=t(this).attr("data-action");if("close"==i)a.hidePanel();else if("location"==i)if("XY"==a.curType){var e=a.panel.find("#location_xy_x").val(),o=a.panel.find("#location_xy_y").val();n.clear(a.options.pointLayerID),n.zoomToCenter([e,o]),n.addPoint(a.options.pointLayerID,[e,o])}else if("DMDZ"==a.curType){var e=a.panel.find("#location_dingming").val(),o=a.panel.find("#location_dizhi").val();n.clear(a.options.pointLayerID),n.zoomToCenter([e,o]),n.addPoint(a.options.pointLayerID,[e,o])}else if("DMS"==a.curType){var l=a.panel.find("#location_dms_xd").val(),s=a.panel.find("#location_dms_xm").val()/60,p=a.panel.find("#location_dms_xs").val()/3500,d=a.panel.find("#location_dms_yd").val(),c=a.panel.find("#location_dms_ym").val()/60,r=a.panel.find("#location_dms_ys").val()/3500,e=parseFloat(l)+parseFloat(s)+parseFloat(p),o=parseFloat(d)+parseFloat(c)+parseFloat(r);n.clear(a.options.pointLayerID),n.zoomToCenter([e,o]),n.addPoint(a.options.pointLayerID,[e,o])}})}.call(this)},l.destroy=function(){},a.default=l}.call(a,n("7t+N"))}});
//# sourceMappingURL=11.e879a11b014921027c3f.js.map